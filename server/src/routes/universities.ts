import express from "express";
import University from "../models/university";
import { isValidObjectId } from "mongoose";
const router = express.Router();

router.get("/", async (req, res) => {
  const universities = await University.find({});
  res.send(universities);
});

router.get("/:id", async (req, res) => {
  const id = req.params.id;
  const isValidId = isValidObjectId(id);
  if (!isValidId) return res.status(400).send("bad request");
  const university = await University.findById(id);
  res.send(university);
});

router.post("/", async (req, res) => {
  const universities = [
    "Аграрен университет",
    "Академия за музикално, танцово и изобразително изкуство",
    "Академия на МВР",
    "Американски университет в България",
    "Бургаски свободен университет",
    "Варненски свободен университет „Черноризец Храбър“",
    "Великотърновски университет „Свети свети Кирил и Методий“",
    "Висше военноморско училище „Никола Вапцаров“",
    "Висше строително училище „Любен Каравелов“",
    "Висше транспортно училище „Тодор Каблешков“",
    "Висше училище по агробизнес и развитие на регионите",
    "Висше училище по застраховане и финанси",
    "Висше училище по мениджмънт",
    "Висше училище по сигурност и икономика",
    "Висше училище по телекомуникации и пощи",
    "Военна академия „Георги Раковски“",
    "Европейски политехнически университет",
    "Европейско висше училище по икономика и мениджмънт",
    "Икономически университет",
    "Колеж по мениджмънт, търговия и маркетинг",
    "Лесотехнически университет",
    "Медицински университет - Плевен",
    "Медицински университет - Пловдив",
    "Медицински университет - София",
    "Медицински университет „Професор доктор Параскев Стоянов“, Варна",
    "Международно висше бизнес училище",
    "Минно-геоложки университет „Свети Иван Рилски“",
    "Национален военен университет „Васил Левски“",
    "Национална академия за театрално и филмово изкуство „Кръстьо Сарафов“",
    "Национална музикална академия „Професор Панчо Владигеров“",
    "Национална спортна академия „Васил Левски“",
    "Шуменски университет „Епископ Константин Преславски“",
    "Национална художествена академия",
    "Нов български университет",
    "Пловдивски университет „Паисий Хилендарски“",
    "Русенски университет „Ангел Кънчев“",
    "Софийски университет „Свети Климент Охридски“",
    "Стопанска академия „Димитър Ценов“",
    "Театрален колеж „Любен Гройс“",
    "Технически университет - Варна",
    "Технически университет - Габрово",
    "Технически университет - София",
    "Тракийски университет",
    "Университет „Проф. д-р Асен Златаров“",
    "Университет за национално и световно стопанство",
    "Университет по архитектура, строителство и геодезия",
    "Университет по библиотекознание и информационни технологии",
    "Университет по хранителни технологии",
    "Химикотехнологичен и металургичен университет",
    "Шуменски университет „Епископ Константин Преславски“",
    "Югозападен университет „Неофит Рилски“",
  ];

  for (let i = 0; i < universities.length; i++) {
    const uni = new University({
      name: universities[i],
    });

    await uni.save().catch((err) => {
      console.log("there was an error", err);
    });
  }

  res.send("created");
});

export default router;
